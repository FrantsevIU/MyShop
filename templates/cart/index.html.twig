{% extends 'base.html.twig' %}

{% block body %}
    {% set cent = 0 %}
    {% set item = 0 %}
    <section class="h-100 h-custom" style="background-color: #eee;">
        <div class="container py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col">
                    <div class="card">
                        <div class="card-body p-4">

                            <div class="row">

                                <div class="col-lg-7">
                                    <h5 class="mb-3"><a style="text-decoration: none; color: #009900;" href="{{ path('shopList') }}"> Continue shopping➔</a>
                                    </h5>
                                    <hr>

                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <div>
                                            <p class="mb-1">Shopping cart</p>

                                        </div>
{#                                        <div>#}
{#                                            <p class="mb-0"><span class="text-muted">Sort by:</span> <a href="#!"#}
{#                                                                                                        class="text-body">price#}
{#                                                    <i class="fas fa-angle-down mt-1"></i></a></p>#}
{#                                        </div>#}
                                    </div>
                                    {% for items in cartItem %}
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <div class="d-flex justify-content-between">
                                                    <div class="d-flex flex-row align-items-center">
                                                        <div>
                                                            <img
                                                                    src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-shopping-carts/img1.webp"
                                                                    class="img-fluid rounded-3" alt="Shopping item"
                                                                    style="width: 65px;">
                                                        </div>
                                                        <div class="ms-3">
                                                            <h5>Iphone 11 pro</h5>
                                                            <p class="small mb-0">256GB, Navy Blue</p>
                                                        </div>

                                                    </div>
                                                    <div class="d-flex flex-row align-items-center">
                                                        <div class="ms-3"><a
                                                                    style="font-size: 35px; text-decoration: none; color: red;"
                                                                    href="{{ path('cartAction',{'nameAction':'changeProduct','id':items.Id,'changeCount':"plus"}) }}">+</a>
                                                        </div>
                                                        <div style="width: 15px;"></div>
                                                        <div style="width: 15px;">
                                                            <h5 style="text-align:center;border: 2px solid blue; padding: 5px 10px ; border-radius: 5px; "
                                                                class="fw-normal mb-0">{{ items.count |trans|nl2br }}</h5>
                                                        </div>
                                                        <div class="ms-3"><a
                                                                    style="font-size: 40px; text-decoration: none; color: red;"
                                                                    href="{{ path('cartAction',{'nameAction':'changeProduct','id':items.Id,'changeCount':"minus"}) }}">-</a>
                                                        </div>
                                                        <div style="width: 20px;"></div>

                                                        <div style="width: 80px;">
                                                            <h5 class="mb-0">
                                                                ${{ items.product.price*items.count |trans|nl2br }}</h5>
                                                        </div>
                                                        <div>
                                                            <h5>
                                                                <a style="text-decoration: none; color: #0dcaf0;" href="{{ path('cartAction',{'nameAction':'dellProduct','id':items.Id}) }}">dell</a>
                                                            </h5>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% set cent = cent+items.product.price*items.count %}
                                        {% set item = item+items.count %}
                                    {% endfor %}
                                    <hr>
                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <p class="mb-0">You have <b>{{ item }}</b> items in your cart</p>
                                        <div style="width: 30px;"></div>
                                        <p class="mb-0">Total price: <b>${{ cent }}</b></p>
                                        <div style="width: 30px;"></div>
                                        <div class="col-lg-7">
                                            <h5 class="mb-4"><a
                                                        href="{{ path('cartAction',{'nameAction':'clearProduct','id':'1'}) }}"
                                                        class="text- body" style="color: #D64292;text-decoration: none;">Clear cart</a></h5>

                                        </div>
                                        <h5 class="mb-4"><a style="text-decoration: none;color: #B0413E"href="{{ path('orderCart') }}" class="text- body">Order</a>
                                        </h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


{% endblock %}

{# {% for items in cartItem %} #}


{#    <p>{{ items.itemId |trans|nl2br }}</p> #}
{#    <p>{{ items.itemId.discription |trans|nl2br }}</p> #}
{#    <p>Price:{{ items.itemId.price*items.count |trans|nl2br }}</p> #}
{#    <p><a>Count: <a href="{{ path('dellUpdateCart',{'id':items.Id}) }}">-</a>{{ items.count |trans|nl2br }}</a><a #}
{#                href="{{ path('addUpdateCart',{'id':items.Id,'changeCOunt':'plus'}) }}">+</a></p> #}
{#    {% set cent = cent+items.itemId.price*items.count %} #}
{#    {% set item = item+items.count %} #}
{#    <p><a href="{{ path('dellItem',{'id':items.Id}) }}">dell Item</a></p> #}


{# {% endfor %} #}

{# TotalPrice: {{ cent }} #}
{# TotalItem:{{ item }} #}
{# {% if cent >=2000 %} #}
{#    <p> Выберете подарок</p><p>{{ presenet }}</p> <a href="{{ path('itemAddCart',{'id':presenet.id}) }}">Выбрать подарок</a></p> #}

{# {% else %} #}
{# {% endif %} #}
{#    {{ cent+items.itemId.price*items.count  }} #}
{# <p><a href="{{ path('clear') }}">Clear</a></p> #}

{# {% endblock %} #}
